!function(){const e=document,t=e.documentElement,n=e.body,i=e.getElementById("lights-toggle"),s=window.sr=ScrollReveal();function a(){let e=i.parentNode.querySelector(".label-text");i.checked?(n.classList.remove("lights-off"),e&&(e.innerHTML="dark")):(n.classList.add("lights-off"),e&&(e.innerHTML="light"))}t.classList.remove("no-js"),t.classList.add("js"),window.addEventListener("load",function(){n.classList.add("is-loaded")}),n.classList.contains("has-animations")&&window.addEventListener("load",function(){s.reveal(".feature",{duration:600,distance:"20px",easing:"cubic-bezier(0.215, 0.61, 0.355, 1)",origin:"right",viewFactor:.2})}),i&&(window.addEventListener("load",a),i.addEventListener("change",a))}();

document.getElementById("submit").addEventListener("click", function() {
    var data = {
        communicationTimestamp: new Date().toISOString(),
        resultCode: "resultCode-OK",
        resultDescription: "resultCode-OK",
        data: {
            stuName: document.getElementById("stuName").value,
            stuAge: document.getElementById("stuAge").value,
            stuPhoneNumber: document.getElementById("stuPhoneNumber").value
        }
    };

    console.log(data);

    fetch('/api/student', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
        // .then(response => response.json())
        .then(response => {
            if (!response.ok) {
                // 서버로부터 오류 응답을 받은 경우, 에러 메시지를 추출합니다.
                return response.json().then(err => {throw err;});
            }
            return response.json();
        })
        .then(data => {
            console.log('Success:', data);
            alert("데이터가 성공적으로 전송되었습니다.");
        })
        .catch((error) => {
            console.error('Error:', error);
            // 에러 상황에서 사용자에게 알립니다.
            alert("데이터 전송에 실패했습니다: " + error.resultDescription);
        });
});

document.getElementById('submit').addEventListener('click', function() {
    document.getElementById('stuName').value = ''; // 이름 입력란 초기화
    document.getElementById('stuAge').value = ''; // 나이 입력란 초기화
    document.getElementById('stuPhoneNumber').value = ''; // 전화번호 입력란 초기화
});


